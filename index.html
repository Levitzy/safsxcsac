<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discord Bot Admin Panel</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <style>
        :root {
            --geist-foreground: #000; --geist-background: #fff; --geist-selection: #79ffe1;
            --geist-secondary: #666; --geist-success: #0070f3; --geist-error: #ee0000;
            --bs-primary-rgb: 0, 112, 243; /* For Bootstrap components to use Geist success color */
        }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif; background-color: #f8f9fa; color: var(--geist-foreground); }
        .geist-card { border-radius: .375rem; border: 1px solid #dee2e6; box-shadow: 0 2px 6px rgba(0,0,0,0.05); transition: all 0.2s ease; background-color: #fff; }
        .geist-card:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .geist-button { border-radius: .375rem; font-weight: 500; transition: all 0.2s ease; }
        .geist-button-primary { background-color: var(--geist-success); color: white; border-color: var(--geist-success); }
        .geist-button-primary:hover { background-color: #005bb5; border-color: #005bb5; }
        .geist-input { border-radius: .375rem; border: 1px solid #ced4da; transition: all 0.2s ease; }
        .geist-input:focus { border-color: var(--geist-success); box-shadow: 0 0 0 0.25rem rgba(0,112,243,0.25); }
        .toast-container { position: fixed; top: 20px; right: 20px; z-index: 1090; } /* Ensure toast is above modal */
        .loading { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(255, 255, 255, 0.85); display: flex; justify-content: center; align-items: center; z-index: 1100; /* Ensure loading is above toast */ }
        .spinner { width: 3rem; height: 3rem; border: .3em solid rgba(0, 112, 243, 0.2); border-radius: 50%; border-top-color: var(--geist-success); animation: spin 1s ease-in-out infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .code-block { background-color: #e9ecef; border-radius: .25rem; padding: 1rem; font-family: monospace; overflow-x: auto; margin: 1rem 0; white-space: pre; }
        .copy-btn { position: absolute; top: 0.5rem; right: 0.5rem; }
        .admin-item { padding: 1rem; border-bottom: 1px solid #eee; }
        .admin-item:last-child { border-bottom: none; }
        .permission-badge { font-size: 0.8em; margin-right: 0.3rem; margin-bottom: 0.3rem; }
        #admin-commands-list-modal .form-check { padding-left: 1.5em; margin-bottom: 0.5rem; }
        #admin-commands-list-modal .form-check-input { float: none; margin-left: -1.5em; }
    </style>
</head>
<body>
    <div id="loading" class="loading" style="display: none;">
        <div class="spinner"></div>
    </div>

    <div class="toast-container">
        <div id="toast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header">
                <strong id="toast-title" class="me-auto">Notification</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div id="toast-body" class="toast-body"></div>
        </div>
    </div>

    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="geist-card p-4 mb-4">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h1 class="h3 m-0">Discord Bot Admin Panel</h1>
                    </div>
                    
                    <div class="mb-4">
                        <label for="prefix" class="form-label fw-medium">Command Prefix</label>
                        <div class="input-group">
                            <input type="text" id="prefix" class="form-control geist-input" placeholder="Enter command prefix (leave empty for no prefix)">
                            <button class="btn btn-outline-primary geist-button" type="button" onclick="updatePrefix()">Update Prefix</button>
                        </div>
                        <div class="form-text">Current prefix: <span id="current-prefix" class="fw-semibold"></span></div>
                    </div>
                </div>
                
                <div id="admin-management-section" class="geist-card p-4 mb-4">
                    <h2 class="h4 mb-3">Admin Permission Management</h2>
                    
                    <div id="github-warning" class="alert alert-info">
                        <h4 class="alert-heading fs-5"><i class="bi bi-github me-2"></i>GitHub Integration</h4>
                        <p>Admin permissions are managed directly in your GitHub repository. Changes made here will attempt to update the file on GitHub.</p>
                        <p class="mb-0">GitHub file URL: <code id="github-url" class="fw-semibold">Loading...</code></p>
                        <div id="github-not-configured-warning" class="alert alert-danger mt-2" style="display: none;">
                            <i class="bi bi-exclamation-triangle-fill me-2"></i> <strong>GitHub API Not Configured:</strong> The bot server is not fully set up to write changes to GitHub. Updates made here might be in-memory only and lost on restart.
                        </div>
                    </div>
                     <div class="alert alert-secondary">
                        <p class="mb-1">Required <code>admin_ids.json</code> format on GitHub (example):</p>
                        <div class="position-relative">
                            <pre class="code-block" id="admin-json-format">{
  "ADMIN_PERMISSIONS": {
    "123456789012345678": ["fbcreatev2", "anotherCommand"],
    "987654321098765432": ["all"]
  }
}</pre>
                            <button class="btn btn-sm btn-light copy-btn" onclick="copyToClipboard('admin-json-format', true)"><i class="bi bi-clipboard"></i></button>
                        </div>
                    </div>
                    
                    <div class="d-flex justify-content-end mb-3">
                        <button class="btn btn-outline-primary geist-button" onclick="refreshAdminPermissionsFromServer()">
                            <i class="bi bi-arrow-clockwise me-1"></i> Refresh from GitHub
                        </button>
                    </div>
                    
                    <div class="mb-4 p-3 border rounded bg-light">
                        <h3 class="h5 mb-3">Add New Admin</h3>
                        <div class="row g-3">
                            <div class="col-md-4">
                                <label for="newAdminId" class="form-label">Discord User ID</label>
                                <input type="text" id="newAdminId" class="form-control geist-input" placeholder="17-19 digit ID">
                            </div>
                            <div class="col-md-6">
                                <label for="newAdminPerms" class="form-label">Initial Permissions</label>
                                <input type="text" id="newAdminPerms" class="form-control geist-input" placeholder="e.g., cmd1, cmd2 or all">
                            </div>
                            <div class="col-md-2 d-flex align-items-end">
                                <button class="btn btn-primary geist-button geist-button-primary w-100" type="button" onclick="addAdmin()">Add Admin</button>
                            </div>
                        </div>
                        <div class="form-text mt-1">For permissions, use comma-separated command names or "all" for full access.</div>
                    </div>
                    
                    <h3 class="h5 mb-2">Current Admins & Permissions</h3>
                    <div id="adminList" class="mb-3 list-group">
                        {/* Admin items will be rendered here */}
                    </div>
                    
                    <div class="mt-4">
                        <h3 class="h5 mb-2">Export Current Admin Permissions (JSON)</h3>
                        <div class="position-relative">
                            <pre class="code-block" id="current-admin-json"></pre>
                            <button class="btn btn-sm btn-light copy-btn" onclick="copyToClipboard('current-admin-json', true)"><i class="bi bi-clipboard"></i></button>
                        </div>
                        <button class="btn btn-outline-secondary mt-2 geist-button" onclick="updateAdminJsonDisplay()">
                            <i class="bi bi-arrow-clockwise me-1"></i> Refresh JSON Display
                        </button>
                    </div>
                </div>
                
                <div class="geist-card p-4">
                    <h2 class="h4 mb-3">Bot Information</h2>
                    <div class="row">
                        <div class="col-md-6 mb-3 mb-md-0">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h5 class="card-title">Commands</h5>
                                    <p class="card-text mb-1" id="command-count-details">Loading...</p>
                                    <div id="admin-commands-list-display" class="mt-1" style="max-height: 150px; overflow-y: auto;">
                                        <small class="text-muted">Admin commands will be listed here.</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h5 class="card-title">Uptime</h5>
                                    <p class="card-text" id="uptime">Loading...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Admin Permissions Modal -->
    <div class="modal fade" id="editAdminModal" tabindex="-1" aria-labelledby="editAdminModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editAdminModalLabel">Edit Permissions for Admin</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="editingAdminId">
                    <p>Admin ID: <strong id="modalAdminIdDisplay"></strong></p>
                    
                    <div class="form-check form-switch mb-3">
                        <input class="form-check-input" type="checkbox" role="switch" id="grantAllPermissionsSwitch" onchange="toggleCommandSelection()">
                        <label class="form-check-label" for="grantAllPermissionsSwitch">Grant All Permissions ("all")</label>
                    </div>

                    <div id="specificCommandsSection">
                        <h6>Assign Specific Admin Commands:</h6>
                        <div id="admin-commands-list-modal" class="list-group list-group-flush border rounded p-2" style="max-height: 250px; overflow-y: auto;">
                            {/* Checkboxes for commands will be populated here */}
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary geist-button" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary geist-button geist-button-primary" onclick="saveAdminPermissionsFromModal()">Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentConfig = {
            PREFIX: "",
            ADMIN_PERMISSIONS: {},
            ADMIN_CONFIG_URL: "",
            GITHUB_CONFIGURED: false
        };
        let allBotCommands = []; // To store all commands with their admin_only status
        let editAdminModalInstance = null;
        let startTime = new Date();
        
        document.addEventListener('DOMContentLoaded', function () {
            editAdminModalInstance = new bootstrap.Modal(document.getElementById('editAdminModal'));
            fetchInitialConfig();
            updateUptime();
            setInterval(updateUptime, 1000);
        });
        
        function fetchInitialConfig() {
            showLoading();
            fetch('/api/config')
                .then(response => response.json())
                .then(data => {
                    currentConfig = data;
                    document.getElementById('prefix').value = currentConfig.PREFIX || "";
                    document.getElementById('current-prefix').textContent = currentConfig.PREFIX ? `"${currentConfig.PREFIX}"` : "None (empty)";
                    document.getElementById('github-url').textContent = currentConfig.ADMIN_CONFIG_URL || "URL not configured";
                    
                    document.getElementById('github-not-configured-warning').style.display = !currentConfig.GITHUB_CONFIGURED ? 'block' : 'none';

                    renderAdminList();
                    fetchCommandList(); 
                    updateAdminJsonDisplay();
                    hideLoading();
                })
                .catch(error => {
                    showToast('Error', 'Error loading initial configuration: ' + error.message, false);
                    hideLoading();
                });
        }
        
        function updateAdminJsonDisplay() {
            const jsonElement = document.getElementById('current-admin-json');
            jsonElement.textContent = JSON.stringify({ ADMIN_PERMISSIONS: currentConfig.ADMIN_PERMISSIONS }, null, 2);
        }
        
        function copyToClipboard(elementId, isPreformatted = false) {
            const element = document.getElementById(elementId);
            const textToCopy = isPreformatted ? element.textContent : element.value;
            navigator.clipboard.writeText(textToCopy)
                .then(() => showToast('Success', 'Copied to clipboard!', true))
                .catch(err => showToast('Error', 'Failed to copy: ' + err, false));
        }
        
        function refreshAdminPermissionsFromServer() {
            showLoading();
            fetch('/api/admin-permissions/refresh')
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        currentConfig.ADMIN_PERMISSIONS = data.ADMIN_PERMISSIONS;
                        renderAdminList();
                        updateAdminJsonDisplay();
                        showToast('Success', data.message || 'Admin permissions refreshed from GitHub.', true);
                    } else {
                        showToast('Error', 'Error refreshing admin permissions: ' + (data.message || data.error), false);
                    }
                    hideLoading();
                })
                .catch(error => {
                    showToast('Error', 'Network error refreshing admin permissions: ' + error.message, false);
                    hideLoading();
                });
        }
        
        function fetchCommandList() {
            fetch('/api/commands')
                .then(response => response.json())
                .then(data => {
                    if (data.commands) {
                        allBotCommands = data.commands; // Store all commands
                        const totalCommands = allBotCommands.length;
                        const adminOnlyCommands = allBotCommands.filter(cmd => cmd.admin_only);
                        
                        document.getElementById('command-count-details').textContent = `${totalCommands} commands loaded (${adminOnlyCommands.length} admin-only).`;
                        
                        const adminCmdDisplayEl = document.getElementById('admin-commands-list-display');
                        adminCmdDisplayEl.innerHTML = ''; 
                        if(adminOnlyCommands.length > 0) {
                            const listGroup = document.createElement('ul');
                            listGroup.className = 'list-unstyled mb-0';
                            adminOnlyCommands.forEach(cmd => {
                                const listItem = document.createElement('li');
                                listItem.innerHTML = `<small class="font-monospace badge bg-secondary text-wrap">${cmd.name}</small>`;
                                listGroup.appendChild(listItem);
                            });
                            adminCmdDisplayEl.appendChild(listGroup);
                        } else {
                            adminCmdDisplayEl.innerHTML = '<small class="text-muted">No admin-only commands found.</small>';
                        }
                    }
                })
                .catch(error => {
                    document.getElementById('command-count-details').textContent = 'Unable to fetch command list';
                });
        }
        
        function updateUptime() {
            const diff = new Date() - startTime;
            const d = Math.floor(diff / (1000 * 60 * 60 * 24));
            const h = Math.floor((diff / (1000 * 60 * 60)) % 24);
            const m = Math.floor((diff / (1000 * 60)) % 60);
            const s = Math.floor((diff / 1000) % 60);
            document.getElementById('uptime').textContent = 
                `${d > 0 ? d + 'd ' : ''}${h > 0 || d > 0 ? h + 'h ' : ''}${m > 0 || h > 0 || d > 0 ? m + 'm ' : ''}${s}s`;
        }
        
        function renderAdminList() {
            const adminListEl = document.getElementById('adminList');
            adminListEl.innerHTML = '';
            if (!currentConfig.ADMIN_PERMISSIONS || Object.keys(currentConfig.ADMIN_PERMISSIONS).length === 0) {
                adminListEl.innerHTML = '<div class="list-group-item">No admins configured. Add admin IDs and their permissions.</div>';
                return;
            }
            for (const adminId in currentConfig.ADMIN_PERMISSIONS) {
                const permissions = currentConfig.ADMIN_PERMISSIONS[adminId];
                const item = document.createElement('div');
                item.className = 'list-group-item admin-item d-flex flex-wrap justify-content-between align-items-center';
                
                let permsDisplay = '';
                if (permissions.includes('all')) {
                    permsDisplay = '<span class="badge bg-primary permission-badge text-wrap">All Permissions</span>';
                } else if (permissions.length > 0) {
                    permsDisplay = permissions.map(p => `<span class="badge bg-secondary permission-badge text-wrap">${p}</span>`).join(' ');
                } else {
                    permsDisplay = '<span class="badge bg-warning text-dark permission-badge text-wrap">No Specific Permissions</span>';
                }

                item.innerHTML = `
                    <div class="me-3 mb-2 mb-md-0">
                        <strong class="font-monospace d-block">${adminId}</strong>
                        <div class="mt-1">${permsDisplay}</div>
                    </div>
                    <div class="btn-group btn-group-sm" role="group">
                        <button class="btn btn-outline-primary geist-button" onclick="openEditAdminModal('${adminId}')">
                            <i class="bi bi-pencil-square me-1"></i> Edit
                        </button>
                        <button class="btn btn-outline-danger geist-button" onclick="removeAdmin('${adminId}')">
                            <i class="bi bi-trash me-1"></i> Remove
                        </button>
                    </div>`;
                adminListEl.appendChild(item);
            }
        }

        function openEditAdminModal(adminId) {
            const permissions = currentConfig.ADMIN_PERMISSIONS[adminId] || [];
            document.getElementById('editingAdminId').value = adminId;
            document.getElementById('modalAdminIdDisplay').textContent = adminId;

            const grantAllSwitch = document.getElementById('grantAllPermissionsSwitch');
            grantAllSwitch.checked = permissions.includes('all');

            const commandsListModalEl = document.getElementById('admin-commands-list-modal');
            commandsListModalEl.innerHTML = ''; // Clear previous
            
            const adminOnlyCommands = allBotCommands.filter(cmd => cmd.admin_only);
            if (adminOnlyCommands.length === 0) {
                commandsListModalEl.innerHTML = '<p class="text-muted">No admin-specific commands available to assign.</p>';
            } else {
                adminOnlyCommands.forEach(cmd => {
                    const isChecked = permissions.includes(cmd.name);
                    const commandDiv = document.createElement('div');
                    commandDiv.className = 'form-check';
                    commandDiv.innerHTML = `
                        <input class="form-check-input" type="checkbox" value="${cmd.name}" id="cmd-${cmd.name}-${adminId}" ${isChecked ? 'checked' : ''}>
                        <label class="form-check-label" for="cmd-${cmd.name}-${adminId}">
                            ${cmd.name}
                        </label>
                    `;
                    commandsListModalEl.appendChild(commandDiv);
                });
            }
            toggleCommandSelection(); // Set initial state of command checkboxes based on "all"
            editAdminModalInstance.show();
        }

        function toggleCommandSelection() {
            const grantAll = document.getElementById('grantAllPermissionsSwitch').checked;
            const specificCommandsSection = document.getElementById('specificCommandsSection');
            specificCommandsSection.style.display = grantAll ? 'none' : 'block';
        }

        function saveAdminPermissionsFromModal() {
            const adminId = document.getElementById('editingAdminId').value;
            const grantAll = document.getElementById('grantAllPermissionsSwitch').checked;
            let newPermissions = [];

            if (grantAll) {
                newPermissions.push('all');
            } else {
                const commandCheckboxes = document.querySelectorAll('#admin-commands-list-modal .form-check-input:checked');
                commandCheckboxes.forEach(checkbox => newPermissions.push(checkbox.value));
            }
            if (newPermissions.length === 0 && !grantAll) {
                 showToast('Warning', 'No specific permissions selected. Admin will have no command access unless "Grant All" is checked.', false);
                 // Optionally, you could prevent saving here or default to something. For now, allow empty array.
            }


            const newAdminConfig = { ...currentConfig.ADMIN_PERMISSIONS };
            newAdminConfig[adminId] = newPermissions;

            updateAdminPermissionsOnServer(newAdminConfig)
                .then(() => {
                    editAdminModalInstance.hide();
                })
                .catch(err => console.error("Failed to save admin permissions from modal:", err));
        }
        
        function updatePrefix() {
            const newPrefix = document.getElementById('prefix').value;
            showLoading();
            fetch('/api/config', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ PREFIX: newPrefix })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    currentConfig.PREFIX = newPrefix;
                    document.getElementById('current-prefix').textContent = newPrefix ? `"${newPrefix}"` : "None (empty)";
                    showToast('Success', data.message || 'Prefix updated successfully!', true);
                } else {
                    showToast('Error', 'Error updating prefix: ' + (data.message || data.error), false);
                }
                hideLoading();
            })
            .catch(error => {
                showToast('Error', 'Network error updating prefix: ' + error.message, false);
                hideLoading();
            });
        }

        function updateAdminPermissionsOnServer(newAdminPermsObject) {
            if (!currentConfig.GITHUB_CONFIGURED) {
                showToast('Error', 'GitHub API not configured on server. Cannot save changes to GitHub.', false);
                hideLoading();
                return Promise.reject(new Error("GitHub not configured"));
            }

            showLoading();
            return fetch('/api/admin-permissions/update', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ admin_permissions: newAdminPermsObject })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    currentConfig.ADMIN_PERMISSIONS = data.ADMIN_PERMISSIONS || newAdminPermsObject;
                    renderAdminList();
                    updateAdminJsonDisplay();
                    showToast('Success', data.message || 'Admin permissions updated on GitHub!', true);
                } else {
                    showToast('Error', 'Error updating admin permissions on GitHub: ' + (data.message || data.error), false);
                    fetchInitialConfig(); 
                }
                hideLoading();
                return data;
            })
            .catch(error => {
                showToast('Error', 'Network error updating admin permissions: ' + error.message, false);
                hideLoading();
                fetchInitialConfig(); 
                throw error;
            });
        }

        function addAdmin() {
            const newAdminIdInput = document.getElementById('newAdminId');
            const newAdminPermsInput = document.getElementById('newAdminPerms');
            const adminId = newAdminIdInput.value.trim();
            const permsStr = newAdminPermsInput.value.trim();
            
            if (!adminId) {
                showToast('Validation Error', 'Please enter a valid Discord User ID', false);
                return;
            }
            if (!/^\d{17,19}$/.test(adminId)) {
                showToast('Validation Error', 'Invalid Discord ID format. IDs are 17-19 digits long.', false);
                return;
            }
            if (currentConfig.ADMIN_PERMISSIONS.hasOwnProperty(adminId)) {
                showToast('Validation Error', 'This admin ID already exists. Edit their permissions instead.', false);
                return;
            }
            if (!permsStr) {
                showToast('Validation Error', 'Please enter initial permissions (e.g., command names or "all").', false);
                return;
            }
            
            const permissionsArray = permsStr.split(',').map(p => p.trim()).filter(p => p.length > 0);
            if (permissionsArray.length === 0) {
                 showToast('Validation Error', 'Permissions cannot be empty. Use "all" or command names.', false);
                return;
            }

            const newAdminConfig = { ...currentConfig.ADMIN_PERMISSIONS };
            newAdminConfig[adminId] = permissionsArray;

            updateAdminPermissionsOnServer(newAdminConfig)
                .then(() => {
                    newAdminIdInput.value = '';
                    newAdminPermsInput.value = '';
                })
                .catch(err => console.error("Failed to add admin:", err));
        }
        
        function removeAdmin(adminIdToRemove) {
            if (!confirm(`Are you sure you want to remove admin ID ${adminIdToRemove}? This will update the file on GitHub.`)) {
                return;
            }
            const newAdminConfig = { ...currentConfig.ADMIN_PERMISSIONS };
            delete newAdminConfig[adminIdToRemove];
            updateAdminPermissionsOnServer(newAdminConfig)
                .catch(err => console.error("Failed to remove admin:", err));
        }
        
        function showLoading() { document.getElementById('loading').style.display = 'flex'; }
        function hideLoading() { document.getElementById('loading').style.display = 'none'; }
        
        let toastInstance = null;
        function showToast(title, message, isSuccess) {
            const toastEl = document.getElementById('toast');
            if (!toastInstance) {
                toastInstance = new bootstrap.Toast(toastEl, { delay: 5000 });
            }
            document.getElementById('toast-title').textContent = title;
            document.getElementById('toast-body').textContent = message;
            toastEl.classList.remove('bg-success', 'bg-danger', 'bg-warning', 'text-white'); // Clear previous
            if (isSuccess === true) {
                toastEl.classList.add('bg-success', 'text-white');
            } else if (isSuccess === false) {
                toastEl.classList.add('bg-danger', 'text-white');
            } else { // Neutral / Warning
                toastEl.classList.add('bg-warning', 'text-dark');
            }
            toastInstance.show();
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>